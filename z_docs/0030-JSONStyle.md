# JSON 规范

## 结构

当请求/返回包括 JSON，应在请求/返回头部包含 `content-type: application/json;charset=utf-8`

### 请求

JSON 结构体应如下

```json
{
  "version": "0.0.0",
  "page": {
    "query": "",
    "offset": 0,
    "size": 100
  },
  "fields": {}
}
```

| Key         | 说明                                                                                         |
| ----------- | -------------------------------------------------------------------------------------------- |
| version     | 请求的版本，默认为 0.0.0                                                                     |
| page.query  | 分页搜索的语句                                                                               |
| page.offset | 分页的偏移索引，最低为 0，最高不限                                                           |
| page.size   | 请求分页内每页包含单个数据的数量，但此为 0 的时候，要求 offset 同时为 0,作为查询总数量的方式 |
| fields      | 请求的参数，应是（Key,Value）结构                                                            |

### 返回

的 JSON 结构体应如下

```json
{
  "result": 0,
  "reason": "",
  "data": {},
  "page": {
    "size": 10,
    "index": 0,
    "total": 100
  },
  "items": []
}
```

| Key        | 说明                                                                               |
| ---------- | ---------------------------------------------------------------------------------- |
| result     | 操作结果，如果成功，则保持为 0,其他错误状态按照不同设计根据文档而定                |
| reason     | 当失败的时候，则必须返回，就算是空字符串也应返回 Key，而正常无错误情况下，不应包含 |
| data       | 返回的数据，应是（Key,Value）结构，不能为 Null，空数据也应该返回 `{}`              |
| page       | 分页结构，应该仅在请求包括 page 的时候返回此项                                     |
| page.size  | 分页内每页包含单个数据的数量                                                       |
| page.index | 分页的当前索引，一般情况应和请求的 _offset.index_ 一致，最低为 0                   |
| page.total | 总页数                                                                             |
| items      | 数组数据结构，应该仅在请求包括 page 的时候返回此项                                 |

> 如果有错误情况下，返回JSON应该仅包括 `result`，`reason`

> 仅在请求带有 page 的情况，会返回 `page`，`items`

## 支持数据类型

| 描述     | 传输数据类型 | 说明                                      |
| -------- | ------------ | ----------------------------------------- |
| 数字型   | Number       | JavaScript 中的双精度浮点型格式           |
| 字符串型 | String       | 双引号包裹的 Unicode 字符和反斜杠转义字符 |
| 布尔型   | Boolean      | true 或 false                             |
| 数组     | Array        | 有序的值序列                              |
| 对象     | Object       | 无序的键:值对集合                         |
| 时间     | String       | 时间应该用 RFC3339 格式传输               |
| 二进制   | String       | 使用 Base64 编码后进行传输                |
| 金额     | String       | 请使用数字字符串形式传输                  |

请尽量不要使用 NULL 作为值
